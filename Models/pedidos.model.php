<?php
require_once('cls_conexion.model.php');
class Clase_Pedidos
{
    public function todos()
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "SELECT pedidos.ID_pedido, clientes.Nombre as cliente, pedidos.Producto, pedidos.Cantidad, pedidos.Fecha_pedido AS Fecha FROM `pedidos` INNER JOIN clientes ON clientes.ID_cliente = pedidos.ID_cliente";
            $result = mysqli_query($con, $cadena);
            return $result;
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function uno($ID_pedido)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "SELECT * FROM `pedidos` WHERE ID_pedido=$ID_pedido";
            $result = mysqli_query($con, $cadena);
            return $result;
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function insertar($ID_cliente, $Producto, $Cantidad, $Fecha_pedido)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "INSERT INTO `pedidos`(`ID_cliente`, `Producto`, `Cantidad`, `Fecha_pedido`) VALUES ('$ID_cliente', '$Producto', '$Cantidad', '$Fecha_pedido')";
            $result = mysqli_query($con, $cadena);
            return 'ok';
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function actualizar($ID_pedido, $ID_cliente, $Producto, $Cantidad, $Fecha_pedido)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "UPDATE `pedidos` SET `ID_cliente`='$ID_cliente', `Producto`='$Producto', `Cantidad`='$Cantidad', `Fecha_pedido`='$Fecha_pedido' WHERE `ID_pedido`='$ID_pedido'";
            $result = mysqli_query($con, $cadena);
            return "ok";
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function eliminar($ID_pedido)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "DELETE FROM pedidos WHERE ID_pedido=$ID_pedido";
            $result = mysqli_query($con, $cadena);
            return "ok";
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
}
